<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Váš košík – Dýchaj Slovo</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Open Sans',sans-serif;margin:40px;background:#f4f4f4;color:#333}
        .c{max-width:800px;margin:auto;background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
        h1{font-family:'Fredoka',sans-serif;color:#2c495e;text-align:center;margin-bottom:20px}
        .i{
            display:flex;gap:15px;padding:15px;border-bottom:1px solid #eee;align-items:center;
            position:relative;
        }
        .i img{width:80px;height:80px;object-fit:contain;border-radius:6px}
        .remove{
            position:absolute;right:15px;top:50%;transform:translateY(-50%);
            background:#ff4444;color:#fff;width:28px;height:28px;border-radius:50%;
            border:none;font-weight:bold;cursor:pointer;font-size:14px;
        }
        .remove:hover{background:#cc0000}
        .t{font-weight:600;font-size:18px;text-align:right;margin:20px 0}
        .btn-container{
            display:flex;gap:15px;justify-content:space-between;align-items:center;
            margin-top:30px;
        }
        .b{
            background:#2c495e;color:#fff;padding:12px 20px;border:none;border-radius:30px;
            cursor:pointer;font-weight:600;flex:1;max-width:200px;text-align:center;
        }
        .b:hover{background:#3fcfd5}
        .back{background:#aaa}
        .back:hover{background:#999}
        @media (max-width:600px){
            .btn-container{flex-direction:column}
            .b{max-width:none}
        }
    </style>
</head>
<body>
<div class="c">
    <h1>Váš košík</h1>
    <div id="items"></div>
    <div class="t">Spolu: <span id="total">€0</span></div>

    <div class="btn-container">
        <button class="b back" onclick="location.href='index.html'">Späť na hlavnú</button>
        <button class="b" onclick="location.href='doprava.html'" id="continueBtn" style="display:none;">Pokračovať</button>
    </div>
</div>

<script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const container = document.getElementById('items');
    const continueBtn = document.getElementById('continueBtn');

    function renderCart() {
        container.innerHTML = '';
        let total = 0;

        if (cart.length === 0) {
            container.innerHTML = '<p>Košík je prázdny.</p>';
            continueBtn.style.display = 'none';
            document.querySelector('.t').style.display = 'none';
        } else {
            document.querySelector('.t').style.display = 'block';
            continueBtn.style.display = 'block';

            cart.forEach((item, index) => {
                const price = parseFloat(item.price.replace('€',''));
                total += price;

                const div = document.createElement('div');
                div.className = 'i';
                div.innerHTML = `
                    <img src="${item.img}" alt="${item.title}">
                    <div style="flex:1">
                        <strong>${item.title}</strong><br>${item.price}
                    </div>
                    <button class="remove" onclick="removeItem(${index})">X</button>
                `;
                container.appendChild(div);
            });
        }
        document.getElementById('total').textContent = `€${total.toFixed(2)}`;
    }

    function removeItem(index) {
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
        updateCartCount();
    }

    function updateCartCount() {
        const count = cart.length;
        const cartBtn = document.querySelector('#cartCount');
        if (cartBtn) cartBtn.textContent = count;
    }

    // Initial render
    renderCart();
</script>
</body>
</html>
