<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dýchaj Slovo</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body{font-family:'Open Sans',sans-serif;margin:0;background:#f4f4f4;color:#333}
        h1,h2{font-family:'Fredoka',sans-serif;color:#2c495e;text-align:center}
        .s{padding:40px 20px}
        .c{max-width:1200px;margin:auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:25px}
        .p{background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,.1);text-align:center}
        .p img{width:100%;height:200px;object-fit:cover}
        .pi{padding:15px}
        .t{font-weight:600;font-size:18px;margin:8px 0}
        .pr{color:#2c495e;font-size:20px;font-weight:600}
        .btn{
            background:#2c495e;color:#fff;padding:10px 18px;border:none;border-radius:30px;
            cursor:pointer;font-weight:600;font-size:15px;margin:10px 5px;display:inline-block
        }
        .btn:hover{background:#3fcfd5}
        .cart-btn{background:#4CAF50}
        .cart-btn:hover{background:#45a049}
        .preview-btn{background:#2c495e}
        .preview-btn:hover{background:#3fcfd5}
        .cart-count{position:fixed;top:20px;right:20px;background:#2c495e;color:#fff;width:40px;height:40px;
                    border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;
                    font-size:18px;box-shadow:0 2px 8px rgba(0,0,0,.2);cursor:pointer;z-index:100}
        .cart-count:hover{background:#3fcfd5}

        /* Modal */
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);
                align-items:center;justify-content:center;z-index:1000;padding:20px}
        .modal-content{background:#fff;max-width:500px;width:100%;border-radius:16px;overflow:hidden;
                        box-shadow:0 8px 32px rgba(0,0,0,.2);text-align:center;position:relative}
        .close-modal{position:absolute;top:15px;right:15px;background:none;border:none;font-size:28px;
                     color:#aaa;cursor:pointer}
        .close-modal:hover{color:#333}
        .modal-img{width:100%;height:300px;object-fit:cover}
        .modal-body{padding:20px}
        .modal-title{font-size:22px;font-weight:600;margin:10px 0}
        .modal-price{font-size:24px;color:#2c495e;font-weight:600}
        .modal-btns{display:flex;gap:15px;justify-content:center;margin-top:20px}
        .modal-btn{flex:1;padding:12px;font-size:16px}
        @media (max-width:600px){
            .modal-btns{flex-direction:column}
            .modal-btn{max-width:none}
        }
    </style>
</head>
<body>

<div class="cart-count" onclick="location.href='kosik.html'" id="cartCount">0</div>

<div class="s">
    <h1>Dýchaj Slovo</h1>
    <div class="c" id="products"></div>
</div>

<!-- Product Modal -->
<div class="modal" id="productModal">
    <div class="modal-content">
        <button class="close-modal" onclick="closeModal()">×</button>
        <img class="modal-img" id="modalImg" src="" alt="">
        <div class="modal-body">
            <div class="modal-title" id="modalTitle"></div>
            <div class="modal-price" id="modalPrice"></div>
            <div class="modal-btns">
                <button class="btn preview-btn" id="previewBtn">Ukážka</button>
                <button class="btn cart-btn" id="addToCartBtn">Do košíka</button>
            </div>
        </div>
    </div>
</div>

<script>
    const products = [
        {title:"Kniha 1",price:"€15",img:"img/book1.jpg",preview:"img/preview1.jpg"},
        {title:"Kniha 2",price:"€18",img:"img/book2.jpg",preview:"img/preview2.jpg"},
        {title:"Kniha 3",price:"€12",img:"img/book3.jpg",preview:"img/preview3.jpg"},
        // Add more products here
    ];

    const container = document.getElementById('products');
    const modal = document.getElementById('productModal');
    let currentProduct = null;

    function renderProducts() {
        container.innerHTML = '';
        products.forEach((p, i) => {
            const div = document.createElement('div');
            div.className = 'p';
            div.innerHTML = `
                <img src="${p.img}" alt="${p.title}">
                <div class="pi">
                    <div class="t">${p.title}</div>
                    <div class="pr">${p.price}</div>
                    <button class="btn" onclick="openProduct(${i})">Detaily</button>
                </div>
            `;
            container.appendChild(div);
        });
        updateCartCount();
    }

    function openProduct(index) {
        currentProduct = products[index];
        document.getElementById('modalImg').src = currentProduct.img;
        document.getElementById('modalTitle').textContent = currentProduct.title;
        document.getElementById('modalPrice').textContent = currentProduct.price;
        document.getElementById('previewBtn').onclick = () => showPreview(currentProduct.preview);
        document.getElementById('addToCartBtn').onclick = () => addToCart(currentProduct);
        modal.style.display = 'flex';
    }

    function showPreview(src) {
        document.getElementById('modalImg').src = src;
    }

    function addToCart(product) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.push({title: product.title, price: product.price, img: product.img});
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount();
        alert(`${product.title} pridané do košíka!`);
    }

    function updateCartCount() {
        const count = (JSON.parse(localStorage.getItem('cart')) || []).length;
        document.getElementById('cartCount').textContent = count;
    }

    function closeModal() {
        modal.style.display = 'none';
    }

    // Close modal on outside click
    window.onclick = function(e) {
        if (e.target === modal) closeModal();
    }

    renderProducts();
</script>

</body>
</html>
